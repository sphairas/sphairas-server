#!/bin/bash
#
cd "$(dirname "$0")"

if [ ! -f $APP_RESOURCES/web-ui-configuration.xml ]; then
    #sed kann mehrfach -e haben !
    sed -e "s/\${PROVIDER}/$SPHAIRAS_PROVIDER/" -e "s/\${login-provider-display-label}/${LOGINDOMAIN:-$SPHAIRAS_HOSTNAME}/" web-ui-configuration.xml > $APP_RESOURCES/web-ui-configuration.xml
    echo "Created web-ui-configuration.xml"
fi
#
if [ ! -f $APP_RESOURCES/schulvorlage.xml ]; then
    #sed kann mehrfach -e haben !
    sed -e "s/\${Schulname}/${SPHAIRAS_SCHOOLNAME:-Schule}/" -e "s/\${Schulort}/${SPHAIRAS_LOCATION:-Ort}/" schulvorlage.xml > $APP_RESOURCES/schulvorlage.xml
    echo "Created schulvorlage.xml"
fi
#
if [ ! -f $APP_RESOURCES/default.properties ]; then
    cp default.properties $APP_RESOURCES/default.properties
    echo "authority=${SPHAIRAS_PROVIDER}/1" >> $APP_RESOURCES/default.properties
#    echo "providerURL=$SPHAIRAS_PROVIDER" >> $APP_RESOURCES/default.properties
    echo "custom.report.notes.conventions=$SPHAIRAS_PROVIDER.zeugnis.bemerkungen" >> $APP_RESOURCES/default.properties
    echo "Created default.properties"
fi
#
if [ ! -f $APP_RESOURCES/layer.xml ]; then
    sed -e "s/\${PROVIDER}/$SPHAIRAS_PROVIDER/" -e "s/\${PROVIDER_NAME}/${SPHAIRAS_SCHOOLNAME:-Schule}/" layer.xml > $APP_RESOURCES/layer.xml
    echo "Created layer.xml for $SPHAIRAS_PROVIDER ($SPHAIRAS_SCHOOLNAME)"
fi
if [ ! -f $APP_RESOURCES/layer-references ]; then 
    echo "#layer-references" >> $APP_RESOURCES/layer-references
fi
if [ ! -f $APP_RESOURCES/signee/custom-report-notes.properties ]; then 
    echo "#Zeugnis Bemerkungen von $SPHAIRAS_PROVIDER" >> $APP_RESOURCES/signee/custom-report-notes.properties
fi
